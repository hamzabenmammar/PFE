{% extends "base.html" %} {% block title %}{{ object.title }}{% endblock %}
{%block content %}
<div class="container py-5">
  <!-- Breadcrumb Navigation -->
  <nav aria-label="breadcrumb" class="mb-4">
    <ol
      class="breadcrumb bg-light p-3 rounded-3 shadow-sm border-start border-4 border-primary"
    >
      <li class="breadcrumb-item">
        <a href="{% url 'resources:list' %}" class="text-decoration-none"
          ><i class="bi bi-archive me-1"></i>Resources</a
        >
      </li>
      <li class="breadcrumb-item">
        <a
          href="{% url 'resources:'|add:list_url_name %}"
          class="text-decoration-none"
          ><i class="bi bi-database me-1"></i>{{resource_type|title}}</a
        >
      </li>
      <li class="breadcrumb-item active">
        {{ object.title|truncatechars:30 }}
      </li>
    </ol>
  </nav>

  <!-- Main Card -->
  <div class="card border-0 shadow-lg mb-5 rounded-4 hover-shadow">
    <div
      class="card-header bg-primary bg-gradient text-white d-flex justify-content-between align-items-center py-3 px-4 rounded-top-4"
    >
      <div>
        <h1 class="h3 mb-0 fw-bold">{{ object.title }}</h1>
      </div>
      {% if request.user == object.author %}
      <div class="d-flex flex-wrap gap-2 mt-2 mt-sm-0">
        <a
          href="{% url 'resources:resource-update' type=resource_type pk=object.pk %}"
          class="btn btn-light btn-sm fw-semibold shadow-sm"
        >
          <i class="bi bi-pencil me-1"></i
          ><span class="d-none d-sm-inline">Edit</span>
        </a>
        <a
          href="{% url 'resources:resource-delete' type=resource_type pk=object.pk %}"
          class="btn btn-danger btn-sm fw-semibold shadow-sm"
        >
          <i class="bi bi-trash me-1"></i
          ><span class="d-none d-sm-inline">Delete</span>
        </a>
      </div>
      {% endif %}
    </div>

    <div class="card-body p-4">
      <div class="row g-4">
        <!-- Main Column -->
        <div class="col-lg-8">
          <div class="mb-4 bg-light p-4 rounded-4 hover-shadow-sm">
            <h3 class="h5 border-bottom pb-2 fw-bold">
              <i class="bi bi-card-text me-2 text-primary"></i>Description
            </h3>
            <p class="lead mt-3">{{ object.description }}</p>
          </div>

          {% if object.keywords %}
          <div class="mb-4 bg-light p-4 rounded-4 hover-shadow-sm">
            <h3 class="h5 border-bottom pb-2 fw-bold">
              <i class="bi bi-tags me-2 text-primary"></i>Keywords
            </h3>
            <div class="d-flex flex-wrap gap-2 mt-3">
              {% for keyword in object.keywords %}
              <span
                class="badge bg-primary bg-opacity-75 py-2 px-3 rounded-pill"
                ><i class="bi bi-tag me-1"></i>{{ keyword }}</span
              >
              {% endfor %}
            </div>
          </div>
          {% endif %}

          <hr class="my-4" />

          {% block resource_specific_details %} {% endblock %} {% if object.notes %}
          <div class="bg-light p-4 rounded-4 hover-shadow-sm">
            <h3 class="h5 border-bottom pb-2 fw-bold">
              <i class="bi bi-journal me-2 text-primary"></i>Notes
            </h3>
            <div class="mt-3 notes-content">
              <p>{{ object.notes }}</p>
            </div>
          </div>
          {% endif %}
        </div>

        <!-- Sidebar with metadata -->
        <div class="col-lg-4">
          <div
            class="card border-0 shadow-sm h-100 rounded-4 sticky-lg-top"
            style="top: 1rem; z-index: 100"
          >
            <div class="card-header bg-light rounded-top-4">
              <h3 class="h5 mb-0 fw-bold">
                <i class="bi bi-info-circle me-2 text-primary"></i>Resource
                Details
              </h3>
            </div>
            <ul class="list-group list-group-flush">
              <li
                class="list-group-item d-flex justify-content-between align-items-center bg-white bg-opacity-75"
              >
                <span
                  ><i class="bi bi-person-circle me-2 text-primary"></i
                  >Author</span
                >
                <strong
                  class="badge bg-secondary bg-opacity-10 text-secondary py-2 px-3"
                  >{{ object.author.username}}</strong
                >
              </li>
              <li
                class="list-group-item d-flex justify-content-between align-items-center bg-white bg-opacity-75"
              >
                <span
                  ><i class="bi bi-calendar-event me-2 text-primary"></i
                  >Created</span
                >
                <strong
                  class="badge bg-secondary bg-opacity-10 text-secondary py-2 px-3"
                  >{{ object.creation_date|date:"M d, Y" }}</strong
                >
              </li>
              <li
                class="list-group-item d-flex justify-content-between align-items-center bg-white bg-opacity-75"
              >
                <span
                  ><i class="bi bi-arrow-clockwise me-2 text-primary"></i>Last
                  Updated</span
                >
                <strong
                  class="badge bg-secondary bg-opacity-10 text-secondary py-2 px-3"
                  >{{ object.modified_date|date:"M d, Y" }}</strong
                >
              </li>
              <li
                class="list-group-item d-flex justify-content-between align-items-center bg-white bg-opacity-75"
              >
                <span
                  ><i class="bi bi-database-fill me-2 text-primary"></i
                  >Type</span
                >
                <strong class="badge bg-primary py-2 px-3"
                  >{{resource_type|title}}</strong
                >
              </li>
              <li
                class="list-group-item d-flex justify-content-between align-items-center bg-white bg-opacity-75"
              >
                <span><i class="bi bi-eye me-2 text-primary"></i>Views</span>
                <strong
                  class="badge bg-secondary bg-opacity-10 text-secondary py-2 px-3"
                  >{{ object.views_count }}</strong
                >
              </li>
              {% if object.file %}
              <li class="list-group-item bg-white bg-opacity-75 p-3">
                <a
                  href="{{ object.file.url }}"
                  download
                  class="btn btn-primary w-100 shadow-sm fw-semibold"
                >
                  <i class="bi bi-cloud-download me-2"></i>Download Corpus
                </a>
              </li>
              {% endif %} {% if object.access_link %}
              <li class="list-group-item bg-white bg-opacity-75 p-3">
                <a
                  href="{{ object.access_link }}"
                  target="_blank"
                  class="btn btn-outline-primary w-100 shadow-sm fw-semibold"
                >
                  <i class="bi bi-box-arrow-up-right me-2"></i>Access Resource
                </a>
              </li>
              {% endif %}
            </ul>
            <div class="card-footer bg-light rounded-bottom-4 p-3"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  /* Base Styling */
  :root {
    --primary-color: #0d6efd;
    --primary-color-light: #edf5ff;
    --secondary-color: #6c757d;
    --success-color: #198754;
    --danger-color: #dc3545;
    --light-color: #f8f9fa;
    --dark-color: #212529;
    --transition: all 0.3s ease;
    --border-radius: 0.75rem;
    --shadow-sm: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    --shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    --shadow-lg: 0 1rem 3rem rgba(0, 0, 0, 0.175);
  }

  /* Card Styling */
  .card {
    border-radius: var(--border-radius);
    overflow: hidden;
    transition: var(--transition);
  }

  .breadcrumb {
    border-radius: var(--border-radius);
  }

  .badge {
    font-weight: 500;
    letter-spacing: 0.3px;
    transition: var(--transition);
  }

  .badge:hover {
    transform: scale(1.05);
  }

  .btn {
    border-radius: var(--border-radius);
    transition: var(--transition);
  }

  .btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow);
  }

  .lead {
    font-size: 1.1rem;
    line-height: 1.7;
    color: var(--dark-color);
  }

  .hover-shadow:hover {
    box-shadow: var(--shadow);
  }

  .hover-shadow-sm:hover {
    box-shadow: var(--shadow-sm);
    transform: translateY(-2px);
  }

  .notes-content p {
    line-height: 1.7;
  }

  /* Rounded Corners */
  .rounded-4 {
    border-radius: var(--border-radius);
  }

  .rounded-top-4 {
    border-top-left-radius: var(--border-radius);
    border-top-right-radius: var(--border-radius);
  }

  .rounded-bottom-4 {
    border-bottom-left-radius: var(--border-radius);
    border-bottom-right-radius: var(--border-radius);
  }

  /* Corpus Grid Layout */
  .corpus-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 25px;
    padding: 10px 0;
  }

  /* Corpus Card Styling with Animation */
  .corpus-card {
    position: relative;
    height: 100%;
    display: flex;
    flex-direction: column;
    border: none;
    border-radius: var(--border-radius);
    background-color: #fff;
    box-shadow: var(--shadow-sm);
    transition: var(--transition);
    overflow: hidden;
  }

  .corpus-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow);
  }

  .corpus-ribbon {
    position: absolute;
    top: 10px;
    right: -30px;
    transform: rotate(45deg);
    background-color: var(--primary-color);
    color: white;
    padding: 5px 30px;
    font-size: 0.75rem;
    font-weight: bold;
    z-index: 1;
  }

  .corpus-header {
    padding: 20px;
    background-color: var(--light-color);
    border-bottom: 3px solid var(--primary-color-light);
  }

  .corpus-title {
    color: var(--primary-color);
    font-size: 1.25rem;
    font-weight: 600;
    margin: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .corpus-body {
    padding: 20px;
    flex-grow: 1;
    background-color: white;
  }

  .corpus-info {
    margin-bottom: 15px;
  }

  .info-row {
    margin-bottom: 8px;
    font-size: 0.95rem;
    display: flex;
    align-items: center;
  }

  .corpus-description {
    padding-top: 15px;
    border-top: 1px solid #eee;
    font-size: 0.95rem;
    color: var(--secondary-color);
  }

  .corpus-actions {
    padding: 20px;
    background-color: var(--light-color);
    border-top: 1px solid #eee;
  }

  /* Empty State */
  .empty-state {
    text-align: center;
    padding: 50px 20px;
    background-color: var(--light-color);
    border-radius: var(--border-radius);
  }

  /* Responsive Adjustments */
  @media (max-width: 991.98px) {
    .sticky-lg-top {
      position: static;
    }

    .card-header {
      flex-wrap: wrap;
    }

    .card-header div:last-child {
      margin-top: 0.5rem;
    }
  }

  @media (max-width: 767.98px) {
    .corpus-grid {
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
    }

    .card-header h1 {
      font-size: 1.25rem;
    }

    .lead {
      font-size: 1rem;
    }

    .container {
      padding-left: 20px;
      padding-right: 20px;
    }
  }

  @media (max-width: 575.98px) {
    .corpus-grid {
      grid-template-columns: 1fr;
    }

    .breadcrumb {
      font-size: 0.9rem;
    }

    .card-body {
      padding: 15px !important;
    }

    .related-resources h3 {
      font-size: 1.25rem;
    }
  }

  /* Animations */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .card,
  .corpus-card {
    animation: fadeIn 0.5s ease-out forwards;
  }

  .corpus-card:nth-child(2) {
    animation-delay: 0.1s;
  }

  .corpus-card:nth-child(3) {
    animation-delay: 0.2s;
  }
</style>
{% endblock %}
