{% extends "base.html" %}

{% block title %}{{ object.title }}{% endblock %}

{% block content %}
<div class="container py-4">
    <!-- Fil d'Ariane amélioré -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb bg-light p-3 rounded-3 shadow-sm">
            <li class="breadcrumb-item"><a href="{% url 'resources:list' %}" class="text-decoration-none"><i class="bi bi-archive me-1"></i>Resources</a></li>
            {% if object.resource_type == 'document' %}
                <li class="breadcrumb-item"><a href="{% url 'resources:document_list' %}" class="text-decoration-none"><i class="bi bi-file-text me-1"></i>Documents</a></li>
            {% elif object.resource_type == 'tool' %}
                <li class="breadcrumb-item"><a href="{% url 'resources:tool_list' %}" class="text-decoration-none"><i class="bi bi-tools me-1"></i>Tools</a></li>
            {% elif object.resource_type == 'course' %}
                <li class="breadcrumb-item"><a href="{% url 'resources:course_list' %}" class="text-decoration-none"><i class="bi bi-mortarboard me-1"></i>Courses</a></li>
            {% elif object.resource_type == 'corpus' %}
                <li class="breadcrumb-item"><a href="{% url 'resources:corpus_list' %}" class="text-decoration-none"><i class="bi bi-database me-1"></i>Corpora</a></li>
            {% endif %}
            <li class="breadcrumb-item active">{{ object.title|truncatechars:30 }}</li>
        </ol>
    </nav>

    <!-- Carte principale -->
    <div class="card border-0 shadow-lg">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center py-3">
            <div>
                <h1 class="h4 mb-0 fw-bold">{{ object.title }}</h1>
            
                 {% if request.user == object.author %}
       
                 <center><a href="{% url 'resources:resource-update' type=view.kwargs.type pk=object.pk %}" class="btn btn-light btn-sm me-2 shadow-sm">
                       <i class="fas fa-edit me-1"></i> Edit
                         </a>
                         <a href="{% url 'resources:resource-delete' type=view.kwargs.type pk=object.pk %}" class="btn btn-danger btn-sm shadow-sm">
                          <i class="fas fa-trash me-1"></i> Delete
                     </a></center> 
            </div>
            {% endif %}
        </div>
        <br>
        <hr>
        
        <div class="card-body p-4">
            <div class="row g-4">
                <!-- Colonne principale -->
                <div class="col-lg-8">
                    <div class="mb-4">
                        <h3 class="h5 border-bottom pb-2 fw-bold"><i class="bi bi-card-text me-2"></i>Description</h3>
                        <p class="lead mt-3">{{ object.description }}</p>
                    </div>
                    <br>
                    
                    {% if object.keywords %}
                    <div class="mb-4">
                        <h3 class="h5 border-bottom pb-2 fw-bold"><i class="bi bi-tags me-2"></i>Keywords</h3>
                        <div class="d-flex flex-wrap gap-2 mt-3">
                                <span class="badge bg-secondary py-2 px-3"><i class="bi bi-tag me-1"></i>{{ object.keywords }}</span>
                        </div>
                    </div>
                    {% endif %}
                    <hr>
                    
                    {% block resource_specific_details %}
                    <!-- Contenu spécifique au type de ressource -->
                    {% endblock %}
                    
                </div>
                <br>
                
                <!-- Sidebar avec métadonnées -->
                <div class="col-lg-4">
                    <div class="card border-0 shadow-sm h-100">
                        <div class="card-header bg-light">
                            <h3 class="h6 mb-0 fw-bold"><i class="bi bi-info-circle me-2"></i>Resource Details</h3>
                        </div>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <span><i class="bi bi-person me-2 text-primary"></i>Author</span>
                                <strong>{{ object.author.get_full_name|default:object.author.username }}</strong>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <span><i class="bi bi-calendar me-2 text-primary"></i>Created</span>
                                <strong>{{ object.creation_date|date:"M d, Y" }}</strong>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <span><i class="bi bi-arrow-repeat me-2 text-primary"></i>Last Updated</span>
                                <strong>{{ object.modified_date|date:"M d, Y" }}</strong>
                            </li>
                            {% if object.access_link %}
                            <li class="list-group-item">
                                <a href="{{ object.access_link }}" target="_blank" class="btn btn-outline-primary w-100 shadow-sm">
                                    <i class="bi bi-box-arrow-up-right me-2"></i>Access Resource
                                </a>
                            </li>
                            {% endif %}
                        </ul>
                    </div>
                    

                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .card {
        border-radius: 0.75rem;
        overflow: hidden;
        transition: all 0.3s ease;
    }
    
    .breadcrumb {
        padding: 0.75rem 1rem;
    }
    
    .list-group-item {
        padding: 1rem;
    }
    
    .badge {
        font-weight: 500;
        padding: 0.5em 0.8em;
        margin-right: 0.5rem;
        border-radius: 0.5rem;
        white-space: nowrap;
    }
    
    .btn {
        border-radius: 0.5rem;
        transition: all 0.2s ease;
    }
    
    .btn:hover {
        transform: translateY(-2px);
    }
    
    .lead {
        font-size: 1.1rem;
        line-height: 1.6;
    }
    
    .h5 {
        color: #495057;
    }
</style>
{% endblock %}